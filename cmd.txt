https://www.youtube.com/watch?v=qYEZOymyPzo&list=PLqsayW8DhUmuvgOX08aXYk6Y-HGrdYg20&index=11
#7 - Criando a API

rails new curso_tour_of_heroes_api --api

entra no site do github e cria o repositorio
git status
git add .
git commit -m "Estrutura inical da api"
git remote add origin git@github.com:Vandreh/curso_tour_of_heroes_api.git
git push -u origin master
git status
git commit -am "Adiciona inflection para Hero"
rails g scaffold Hero name:string

para destruir um scaffold: rails d scaffold Hero

rails db:create
rails db:migrate
rails -T
git status
git add .
git commit -m "Cria estrutura para API Hero (scaffold)"
git push



#8 - M de Model
rails s
rails db

rails c
Hero.methods.sort
hero = Hero.new
hero.name = "Thor"
hero.save
hero = Hero.new
hero.save
exit (quit)

rails c
hero = Hero.new
hero.save
hero.errors.messages

comando que depois tudo que fizer serÃ¡ desfeito quando sair (sandbox):
rails c --sandbox
Hero.create name: 'Sandbox'
exit

rails c
1.methods.sort

rails db:seed

rails c
Hero.methods.sort
exit

bundle add faker --group 'development'

bundle update
rails db:seed



#9 - C de Controller
Instalar o Insomnia -> https://insomnia.rest/
https://www.ruby-toolbox.com/

instalar -> gem active_model_serializers
bundle add active_model_serializers

rails g serializer hero
rails routes



#10 - Token parte 1
rails routes
git branch
git checkout -b 10-token-parte-1
git branch
git commit -am "Fixa erro de location ao criar url api/hero"

rails secret (para gerar uma chave)
EDITOR="code --wait" bin/rails credentials:edit

git checkout master


rails routes
git merge --no-ff 10-token-parte-1
git push
git push origin 10-token-parte-1


#11 - Token parte 2
rails g migration AddTokenToHeroes token:string:index
rails c
Hero.delete_all
rails db:migrate

git branch
git checkout -b 11-token-parte-2
git add .
git commit -m "Adiciona coluna token em Heroes"

rails c
hero_params = { name: "Thor"}
hero_params.to_h.merge!({ token: 123 })
hero_params
exit

git status
git commit -am "Altera CRUD para token no banco de dados"
git checkout master
git branch
git merge --no-ff 11-token-parte-2
git push origin 11-token-parte-2
git push



#12 - Deploy da API
git branch
git checkout -b 12-deploy-api






